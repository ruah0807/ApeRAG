openapi: 3.1.0
info:
  title: ApeRAG API
  description: ApeRAG API Documentation
  version: 1.0.0
servers:
  - url: /api/v1
    description: API v1
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
    ApiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
    CookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
paths:
  # bots
  /bots:
    $ref: './paths/bots.yaml#/bots'
  /bots/{bot_id}:
    $ref: './paths/bots.yaml#/bot'
  /bots/{bot_id}/flow:
    $ref: './paths/flow.yaml#/flow'
  /bots/{bot_id}/flow/debug:
    $ref: './paths/bots.yaml#/debugFlow'

  # chats
  /bots/{bot_id}/chats:
    $ref: './paths/chats.yaml#/chats'
  /bots/{bot_id}/chats/{chat_id}:
    $ref: './paths/chats.yaml#/chat'
  /bots/{bot_id}/chats/{chat_id}/title:
    $ref: './paths/chats.yaml#/chat_title_generate'
  /bots/{bot_id}/chats/{chat_id}/messages/{message_id}:
    $ref: './paths/message.yaml#/message'

  # chat documents
  /chats/{chat_id}/documents:
    $ref: './paths/chat_documents.yaml#/chat_documents'
  /chats/{chat_id}/documents/{document_id}:
    $ref: './paths/chat_documents.yaml#/chat_document'



  # collections
  /collections:
    $ref: './paths/collections.yaml#/collections'
  /collections/{collection_id}:
    $ref: './paths/collections.yaml#/collection'
  /collections/{collection_id}/summary/generate:
    $ref: './paths/collections.yaml#/summary_generate'
  /collections/{collection_id}/documents:
    $ref: './paths/collections.yaml#/documents'
  /collections/{collection_id}/documents/{document_id}:
    $ref: './paths/collections.yaml#/document'
  /collections/{collection_id}/documents/{document_id}/rebuild_indexes:
    $ref: './paths/collections.yaml#/rebuild_indexes'
  /collections/{collection_id}/rebuild_failed_indexes:
    $ref: './paths/collections.yaml#/rebuild_failed_indexes'
  /collections/{collection_id}/documents/{document_id}/preview:
    $ref: './paths/collections.yaml#/document_preview'
  /collections/{collection_id}/documents/{document_id}/object:
    $ref: './paths/collections.yaml#/document_object'
  /collections/{collection_id}/documents/upload:
    $ref: './paths/collections.yaml#/upload_document'
  /collections/{collection_id}/documents/confirm:
    $ref: './paths/collections.yaml#/confirm_documents'
  /collections/{collection_id}/searches:
    $ref: './paths/collections.yaml#/searches'
  /collections/{collection_id}/searches/{search_id}:
    $ref: './paths/collections.yaml#/search_detail'

  # settings
  /settings:
    $ref: './paths/settings.yaml#/settings'
  /settings/test_mineru_token:
    $ref: './paths/misc.yaml#/test_mineru_token'

  # graphs
  /collections/{collection_id}/graphs/labels:
    $ref: './paths/collections.yaml#/graph_labels'
  /collections/{collection_id}/graphs:
    $ref: './paths/collections.yaml#/graph'
  /collections/{collection_id}/graphs/nodes/merge:
    $ref: './paths/collections.yaml#/graph_nodes_merge'
  /collections/{collection_id}/graphs/merge-suggestions:
    $ref: './paths/collections.yaml#/graph_merge_suggestions'
  /collections/{collection_id}/graphs/merge-suggestions/{suggestion_id}/action:
    $ref: './paths/collections.yaml#/graph_suggestion_action'
  /collections/{collection_id}/graphs/export/kg-eval:
    $ref: './paths/collections.yaml#/graph_export_kg_eval'
  /collections/{collection_id}/sharing:
    $ref: './paths/collections.yaml#/sharing'

  # marketplace
  /marketplace/collections:
    $ref: './paths/marketplace.yaml#/marketplaceCollections'
  /marketplace/collections/subscriptions:
    $ref: './paths/marketplace.yaml#/marketplaceCollectionsSubscriptions'
  /marketplace/collections/{collection_id}/subscribe:
    $ref: './paths/marketplace.yaml#/marketplaceCollectionSubscribe'
  /marketplace/collections/{collection_id}:
    $ref: './paths/marketplace.yaml#/marketplaceCollection'
  /marketplace/collections/{collection_id}/documents:
    $ref: './paths/marketplace.yaml#/marketplaceCollectionDocuments'
  /marketplace/collections/{collection_id}/documents/{document_id}/preview:
    $ref: './paths/marketplace.yaml#/marketplaceCollectionDocumentPreview'
  /marketplace/collections/{collection_id}/documents/{document_id}/object:
    $ref: './paths/marketplace.yaml#/marketplaceCollectionDocumentObject'
  /marketplace/collections/{collection_id}/graph:
    $ref: './paths/marketplace.yaml#/marketplaceCollectionGraph'

  # apikeys
  /apikeys:
    $ref: './paths/apikeys.yaml#/apikeys'
  /apikeys/{apikey_id}:
    $ref: './paths/apikeys.yaml#/apikey'

  # models
  /available_models:
    $ref: './paths/models.yaml#/availableModels'
  /default_models:
    $ref: './paths/default_models.yaml#/defaultModels'

  # llm configuration
  /llm_configuration:
    $ref: './paths/llm_configuration.yaml#/llmConfiguration'
  /llm_providers:
    $ref: './paths/llm_configuration.yaml#/llmProviders'
  /llm_providers/{provider_name}:
    $ref: './paths/llm_configuration.yaml#/llmProvider'
  /llm_providers/{provider_name}/models:
    $ref: './paths/llm_configuration.yaml#/llmProviderModels'
  /llm_providers/{provider_name}/models/{api}/{model}:
    $ref: './paths/llm_configuration.yaml#/llmProviderModel'
  /llm_provider_models:
    $ref: './paths/llm_configuration.yaml#/llmProviderModelsList'

  # llm services
  /embeddings:
    $ref: './paths/llm.yaml#/embeddings'
  /rerank:
    $ref: './paths/llm.yaml#/rerank'

  # config
  /config:
    $ref: './paths/config.yaml#/config'

  # audit
  /audit-logs:
    $ref: './paths/audit.yaml#/audit_logs'
  /audit-logs/{audit_id}:
    $ref: './paths/audit.yaml#/audit_log_detail'

  # users
  /invite:
    $ref: './paths/auth.yaml#/invite'
  /invitations:
    $ref: './paths/auth.yaml#/invitations'
  /register:
    $ref: './paths/auth.yaml#/register'
  /login:
    $ref: './paths/auth.yaml#/login'
  /logout:
    $ref: './paths/auth.yaml#/logout'
  /users:
    $ref: './paths/auth.yaml#/users'
  /user:
    $ref: './paths/auth.yaml#/user'
  /change-password:
    $ref: './paths/auth.yaml#/changePassword'
  /users/{user_id}:
    $ref: './paths/auth.yaml#/deleteUser'

  # quotas
  /quotas:
    $ref: './paths/quotas.yaml#/quotas'
  /quotas/{user_id}:
    $ref: './paths/quotas.yaml#/quota'
  /quotas/{user_id}/recalculate:
    $ref: './paths/quotas.yaml#/quota_recalculate'
  /system/default-quotas:
    $ref: './paths/quotas.yaml#/system_default_quotas'

  # web services
  /web/search:
    $ref: './paths/web.yaml#/webSearch'
  /web/read:
    $ref: './paths/web.yaml#/webRead'

  # evaluation
  /question-sets:
    $ref: './paths/evaluations.yaml#/question_sets'
  /question-sets/generate:
    $ref: './paths/evaluations.yaml#/generateQuestionSet'
  /question-sets/{qs_id}:
    $ref: './paths/evaluations.yaml#/question_set'
  /question-sets/{qs_id}/questions:
    $ref: './paths/evaluations.yaml#/question_set_questions'
  /question-sets/{qs_id}/questions/{q_id}:
    $ref: './paths/evaluations.yaml#/question'
  /evaluations:
    $ref: './paths/evaluations.yaml#/evaluations'
  /evaluations/{eval_id}:
    $ref: './paths/evaluations.yaml#/evaluation'
  /evaluations/{eval_id}/pause:
    $ref: './paths/evaluations.yaml#/evaluation_pause'
  /evaluations/{eval_id}/resume:
    $ref: './paths/evaluations.yaml#/evaluation_resume'
  /evaluations/{eval_id}/retry:
    $ref: './paths/evaluations.yaml#/evaluation_retry'
  /evaluations/chat_with_agent:
    $ref: './paths/evaluations.yaml#/evaluation_chat_with_agent'

  /agent/message:
    $ref: './paths/agent.yaml'
